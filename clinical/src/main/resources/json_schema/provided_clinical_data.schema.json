{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Provided Patient Record",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "allergies": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedAllergy"
      }
    },
    "bloodTransfusions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedBloodTransfusion"
      }
    },
    "complications": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedComplication"
      }
    },
    "labValues": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedLabValue"
      }
    },
    "medications": {
      "oneOf": [
        {
          "type": "null",
          "title": "Not included"
        },
        {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ProvidedMedication"
          }
        }
      ]
    },
    "molecularTestHistory": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedMolecularTest"
      }
    },
    "patientDetails": {
      "$ref": "#/definitions/ProvidedPatientDetail"
    },
    "priorOtherConditions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedPriorOtherCondition"
      }
    },
    "surgeries": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedSurgery"
      }
    },
    "toxicities": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedToxicity"
      }
    },
    "treatmentHistory": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedTreatmentHistory"
      }
    },
    "tumorDetails": {
      "$ref": "#/definitions/ProvidedTumorDetail"
    },
    "priorPrimaries": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedPriorPrimary"
      }
    },
    "measurements": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedMeasurement"
      }
    },
    "whoEvaluations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ProvidedWhoEvaluation"
      }
    }
  },
  "required": [
    "allergies",
    "bloodTransfusions",
    "complications",
    "labValues",
    "molecularTestHistory",
    "patientDetails",
    "priorOtherConditions",
    "surgeries",
    "toxicities",
    "treatmentHistory",
    "tumorDetails",
    "priorPrimaries",
    "measurements",
    "whoEvaluations"
  ],
  "definitions": {
    "ProvidedAllergy": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of allergy (eg. Pembrolizumab)"
        },
        "startDate": {
          "description": "Start date of appearance of allergy"
        },
        "endDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "End date of appearance of allergy, if applicable"
        },
        "category": {
          "type": "string",
          "description": "Category of allergy (eg. medication)"
        },
        "severity": {
          "type": "string",
          "description": "Severity of allergy (eg. low)"
        },
        "clinicalStatus": {
          "type": "string",
          "description": "Clinical status of allergy (eg. active)"
        },
        "verificationStatus": {
          "type": "string",
          "description": "Verification status of allergy (eg. confirmed)"
        }
      },
      "required": [
        "name",
        "startDate",
        "category",
        "severity",
        "clinicalStatus",
        "verificationStatus"
      ]
    },
    "ProvidedBloodTransfusion": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "evaluationTime": {
          "description": "Time of transfusion"
        },
        "product": {
          "type": "string",
          "description": "Product (eg. Thrombocyte concentrate)"
        }
      },
      "required": [
        "evaluationTime",
        "product"
      ]
    },
    "ProvidedComplication": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of complication (eg. Ascites)"
        },
        "startDate": {
          "description": "Start date of complication"
        },
        "endDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "End date of complication"
        }
      },
      "required": [
        "name",
        "startDate"
      ]
    },
    "ProvidedLabValue": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "evaluationTime": {
          "description": "Time of evaluation"
        },
        "measure": {
          "type": "string",
          "description": "Measure (eg. Carcinoembryonic antigen)"
        },
        "measureCode": {
          "type": "string",
          "description": "Measure code (eg. CEA)"
        },
        "value": {
          "type": "number",
          "description": "Value (eg. 3.5)"
        },
        "unit": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Unit (eg. ug/L)"
        },
        "refUpperBound": {
          "type": "number",
          "description": "Institutional upper reference limit"
        },
        "refLowerBound": {
          "type": "number",
          "description": "Institutional lower reference limit"
        },
        "comparator": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Comparator if applicable (eg. >)"
        }
      },
      "required": [
        "evaluationTime",
        "measure",
        "measureCode",
        "value",
        "refUpperBound",
        "refLowerBound"
      ]
    },
    "ProvidedMedication": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Drug name (eg. Paracetamol)"
        },
        "atcCode": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "ATC code, required if not trial or self care (eg. N02BE01)"
        },
        "startDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "Start date of use"
        },
        "endDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "End date of use"
        },
        "administrationRoute": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Administration route (eg. Oral)"
        },
        "dosage": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "number"
            }
          ],
          "description": "Dosage (eg. 500)"
        },
        "dosageUnit": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Dosage unit (eg. mg)"
        },
        "frequency": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "number"
            }
          ],
          "description": "Frequency (eg. 2)"
        },
        "frequencyUnit": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Frequency unit (eg. day)"
        },
        "periodBetweenDosagesValue": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "number"
            }
          ],
          "description": "Period between dosages value "
        },
        "periodBetweenDosagesUnit": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Period between dosages unit"
        },
        "administrationOnlyIfNeeded": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "boolean"
            }
          ],
          "description": "Administration only if needed"
        },
        "isTrial": {
          "type": "boolean",
          "description": "Drug is still in clinical study"
        },
        "isSelfCare": {
          "type": "boolean",
          "description": "Drug is administered as self-care"
        }
      },
      "required": [
        "name",
        "isTrial",
        "isSelfCare"
      ]
    },
    "ProvidedMolecularTest": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of test administered (eg. IHC)"
        },
        "measure": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Measured gene or protein(eg. HER2)"
        },
        "result": {
          "type": "string",
          "description": "Result of the test (eg. Negative/3+)"
        },
        "resultType": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ]
        },
        "resultDate": {}
      },
      "required": [
        "type",
        "result",
        "resultDate"
      ]
    },
    "ProvidedPatientDetail": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "birthYear": {
          "type": "integer",
          "description": "Year of birth of this patient (eg. 1940)"
        },
        "gender": {
          "type": "string",
          "description": "Year of birth of this patient (eg. Male, Female, Other)"
        },
        "registrationDate": {
          "description": "Registration data of this patient with ACTIN"
        },
        "hashedId": {
          "type": "string",
          "description": "Base64 encoded SHA-256 hash of source hospital's identifier."
        }
      },
      "required": [
        "birthYear",
        "gender",
        "registrationDate",
        "hashedId"
      ]
    },
    "ProvidedPriorOtherCondition": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of condition (eg. Pancreatis)"
        },
        "startDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "Start date of condition"
        },
        "endDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "End date of condition if applicable"
        }
      },
      "required": [
        "name"
      ]
    },
    "ProvidedSurgery": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Name of surgery (eg. Diagnostics stomach)"
        },
        "endDate": {
          "description": "Date of completion, if applicable."
        },
        "status": {
          "type": "string",
          "description": "Status of surgery (eg. complete)"
        }
      },
      "required": [
        "endDate",
        "status"
      ]
    },
    "ProvidedToxicity": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of toxicity (eg. Neuropathy)"
        },
        "evaluatedDate": {
          "description": "Date of evaluation"
        },
        "grade": {
          "type": "integer",
          "description": "Grade (eg. 2)"
        }
      },
      "required": [
        "name",
        "evaluatedDate",
        "grade"
      ]
    },
    "ProvidedTreatmentHistory": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "treatmentName": {
          "type": "string",
          "description": "Name of the treatment given (eg. Gemcitabine+Cisplatin)"
        },
        "intention": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Intention of the treatment given (eg. Palliative)"
        },
        "startDate": {
          "description": "Date of the start of treatment"
        },
        "endDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "Date of the end of treatment"
        },
        "stopReason": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Reason of stopping treatment (eg. Progressive disease)"
        },
        "stopReasonDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ]
        },
        "response": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Response to treatment (eg. Partial Response)"
        },
        "responseDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ]
        },
        "intendedCycles": {
          "type": "integer",
          "description": "Intended number of cycles (eg. 6)"
        },
        "administeredCycles": {
          "type": "integer",
          "description": "Administered number of cycles (eg. 6)"
        },
        "modifications": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ProvidedTreatmentModification"
              }
            }
          ]
        },
        "administeredInStudy": {
          "type": "boolean",
          "description": "Treatment administered in clinical study"
        }
      },
      "required": [
        "treatmentName",
        "startDate",
        "intendedCycles",
        "administeredCycles",
        "administeredInStudy"
      ]
    },
    "ProvidedTreatmentModification": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the modified treatment given (eg. Gemcitabine+Cisplatin)"
        },
        "date": {
          "description": "Date of the start of modification of treatment"
        },
        "administeredCycles": {
          "type": "integer",
          "description": "Modified number of cycles (eg. 6)"
        }
      },
      "required": [
        "name",
        "date",
        "administeredCycles"
      ]
    },
    "ProvidedTumorDetail": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "diagnosisDate": {
          "description": "Date of diagnosis"
        },
        "tumorLocation": {
          "type": "string",
          "description": "Tumor localization details (eg. Lung)"
        },
        "tumorType": {
          "type": "string",
          "description": "Tumor type details (eg. Adenocarcinoma)"
        },
        "tumorGradeDifferentiation": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Tumor grade/differentiation details (eg. Poorly differentiated)"
        },
        "tumorStage": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Tumor stage (roman numeral, eg. IV)"
        },
        "tumorStageDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "Date associated with tumor stage diagnosis"
        },
        "measurableDisease": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "boolean"
            }
          ],
          "description": "Has measurable disease"
        },
        "measurableDiseaseDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ]
        },
        "lesions": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "array",
              "items": {
                "$ref": "#/definitions/ProvidedLesion"
              }
            }
          ]
        },
        "lesionSite": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Deprecated: currently use to store radiology report. Should move to lesions"
        }
      },
      "required": [
        "diagnosisDate",
        "tumorLocation",
        "tumorType"
      ]
    },
    "ProvidedLesion": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "location": {
          "type": "string"
        },
        "subLocation": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ]
        },
        "diagnosisDate": {},
        "active": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "boolean"
            }
          ]
        }
      },
      "required": [
        "location",
        "diagnosisDate"
      ]
    },
    "ProvidedPriorPrimary": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "diagnosisDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ],
          "description": "Diagnosis date"
        },
        "tumorLocation": {
          "type": "string",
          "description": "Tumor localization details (eg. Colon)"
        },
        "tumorType": {
          "type": "string",
          "description": "Tumor type details (eg. Carcinoma)"
        },
        "status": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Observed status of tumor (eg. Active/Inactive"
        },
        "statusDate": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {}
          ]
        }
      },
      "required": [
        "tumorLocation",
        "tumorType"
      ]
    },
    "ProvidedMeasurement": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "date": {
          "description": "Date of measurement"
        },
        "category": {
          "type": "string",
          "description": "Measurement category (eg. Body weight, Arterial blood pressure)"
        },
        "subcategory": {
          "oneOf": [
            {
              "type": "null",
              "title": "Not included"
            },
            {
              "type": "string"
            }
          ],
          "description": "Measurement subcategory (eg. Mean blood pressure)"
        },
        "value": {
          "type": "number",
          "description": "Value (eg. 70)"
        },
        "unit": {
          "type": "string",
          "description": "Unit (eg. kilograms)"
        }
      },
      "required": [
        "date",
        "category",
        "value",
        "unit"
      ]
    },
    "ProvidedWhoEvaluation": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "status": {
          "type": "string",
          "description": "WHO performance status (eg. 1)"
        },
        "evaluationDate": {
          "description": "Date of WHO evaluation."
        }
      },
      "required": [
        "status",
        "evaluationDate"
      ]
    }
  }
}